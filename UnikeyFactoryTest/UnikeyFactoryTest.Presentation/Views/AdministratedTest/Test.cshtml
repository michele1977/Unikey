@using UnikeyFactoryTest.Presentation.Controllers
@model UnikeyFactoryTest.Presentation.Models.AdministratedTestModel
<div class="container">
    @*@using (Html.BeginForm("SaveTest", "AdministratedTest", FormMethod.Post))
        {
            <label>Domanda a caso</label>
            <br />
            <label>Risposta 1</label>
            @Html.RadioButton("1", "Riposta 1")
            <br />
            <label>Risposta 2</label>
            @Html.RadioButton("1", "Riposta 2")
            <br />
            <label>Risposta 3</label>
            @Html.RadioButton("1", "Riposta 3")
            <br />
            <label>Risposta 4</label>
            @Html.RadioButton("1", "Riposta 4")
            <br/>
            <br/>
            <label>Come mi chiamo?</label>
            <br />
            <label>Camillo</label>
            @Html.RadioButton("2", "Camillo")
            <br />
            <label>Paolo</label>
            @Html.RadioButton("2", "Paolo")
            <br />
            <label>Giovanni</label>
            @Html.RadioButton("2", "Giovanni")
            <br />
            <label>dfsdf</label>
            @Html.RadioButton("2", "dfsdf")
            <button type="submit">Save</button>
        }*@


    @{
        //visto che non c'è nessun test mi sono creato una form che compare anche se il test è null
        using (Html.BeginForm("SaveTest", "AdministratedTest"))
        {
            <input type="hidden" name="Name" value="@Model.Name"/>
            <input type="hidden" name="Surname" value="@Model.Surname"/>
            <input type="hidden" name="Test" value="@Model.Test"/>
            <button class="btn btn-success">Save Test</button>

        }
        if (Model.Test != null)
        {
            if (Model.Test.AdministratedQuestions != null)
            {
                using (Html.BeginForm("SaveTest", "AdministratedTest"))
                {
                    <input type="hidden" value="@Model.URL"/>
                    foreach (var question in Model.Test.AdministratedQuestions)
                    {
                        <div class="QuestionContainer">
                            @{
                                if (String.IsNullOrEmpty(question.Text) != true)
                                {
                                    <label id="Question">
                                        @question.Text
                                    </label>
                                }
                                <div class="AnswerContainer">

                                    @{
                                        foreach (var answer in question.AdministratedAnswers)
                                        {
                                            <div class="form-check">
                                                <label>@answer.Text</label>
                                                @Html.RadioButton(question.Id.ToString(),answer.Id)
                                            </div>
                                        }
                                    }
                                </div>
                            }
                        </div>
                    }
                    <button type="submit" class="btn btn-success">Save Test</button>
                }
            }
            
        }
    }
</div>

